<form id="add-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="" onsubmit="return dealFormData();">

    <div class="form-group">
        <label for="c-product_category_id" class="control-label col-xs-12 col-sm-2">{:__('Product_category_id')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-product_category_id" data-rule="" data-source="product/category/index" class="form-control selectpage" name="row[product_category_id]" type="text" value="7">
        </div>
    </div>

    <!--<div class="form-group">
        <label for="c-labels" class="control-label col-xs-12 col-sm-2">{:__('Labels')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-labels" class="form-control" name="row[labels]" type="text" value="">
        </div>
    </div>-->
    <div class="form-group">
        <label for="c-status" class="control-label col-xs-12 col-sm-2">{:__('Status')}:</label>
        <div class="col-xs-12 col-sm-8">
                        
            {foreach name="statusList" item="vo"}
            <label for="row[status]-{$key}"><input id="row[status]-{$key}" name="row[status]" type="radio" value="{$key}" {in name="key" value="status 0"}checked{/in} /> {$vo}</label> 
            {/foreach}

        </div>
    </div>
    <div class="form-group hidden">
        <label for="c-weigh" class="control-label col-xs-12 col-sm-2">{:__('Weigh')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-weigh" class="form-control" name="row[weigh]" type="number" value="0">
        </div>
    </div>
    <div class="form-group">
        <label for="c-product_name" class="control-label col-xs-12 col-sm-2">{:__('Product_name')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-product_name" data-rule="required" class="form-control" name="row[product_name]" type="text" value="">
        </div>
    </div>

    <!-- 产品属性 -->
    <div class="form-group">
        <label for="c-product_name" class="control-label col-xs-12 col-sm-2">属性选择:</label>
        <div id="div-attrs" class="col-xs-12 col-sm-8" style="border: 1px solid #d6d4d4;margin-left: 15px;width: 63%; padding: 15px;">
            <div class="a-attrs">
                <h5>颜色:</h5>
                <div class="attr-list">
                    <input type="checkbox" name="row[attr][0][]" value="黄色">黄色
                    <input type="checkbox" name="row[attr][0][]" value="红色">红色

                    <button class="btn btn-attr" type="button">红色</button>
                    <button class="btn btn-attr" type="button">绿色</button>
                </div>
            </div>
            <div class="a-attrs">
                <h5>内存:</h5>
                <div class="attr-list">
                    <input type="checkbox" name="attrList[1][]" value="黄色">黄色
                    <input type="checkbox" name="attrList[1][]" value="红色">红色

                    <button class="btn btn-attr" type="button">16G</button>
                    <button class="btn btn-attr" type="button">32G</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="c-old_price" class="control-label col-xs-12 col-sm-2">{:__('Old_price')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-old_price" class="form-control" step="0.01" name="row[old_price]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label for="c-price" class="control-label col-xs-12 col-sm-2">{:__('Price')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-price" data-rule="required" class="form-control" step="0.01" name="row[price]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label for="c-cost" class="control-label col-xs-12 col-sm-2">{:__('Cost')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-cost" class="form-control" step="0.01" name="row[cost]" type="number" value="0.00">
        </div>
    </div>
    <div class="form-group">
        <label for="c-title" class="control-label col-xs-12 col-sm-2">{:__('Title')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-title" class="form-control" name="row[title]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label for="c-keywords" class="control-label col-xs-12 col-sm-2">{:__('Keywords')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-keywords" class="form-control" name="row[keywords]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label for="c-description" class="control-label col-xs-12 col-sm-2">{:__('Description')}:</label>
        <div class="col-xs-12 col-sm-8">
            <textarea id="c-description" class="form-control " rows="5" name="row[description]" cols="50"></textarea>
        </div>
    </div>
    <div class="form-group">
        <label for="c-detailcontent" class="control-label col-xs-12 col-sm-2">{:__('Detailcontent')}:</label>
        <div class="col-xs-12 col-sm-8">
            <textarea id="c-detailcontent" class="form-control summernote" rows="5" name="row[detailcontent]" cols="50"></textarea>
        </div>
    </div>
    <div class="form-group">
        <label for="c-stock" class="control-label col-xs-12 col-sm-2">{:__('Stock')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-stock" class="form-control" name="row[stock]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label for="c-sales" class="control-label col-xs-12 col-sm-2">{:__('Sales')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-sales" class="form-control" name="row[sales]" type="number" value="0">
        </div>
    </div>
    <div class="form-group">
        <label for="c-thumbimage" class="control-label col-xs-12 col-sm-2">{:__('Thumbimage')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="form-inline">
                <input id="c-thumbimage" class="form-control" size="50" name="row[thumbimage]" type="text">
                <span><button type="button" id="plupload-thumbimage" class="btn btn-danger plupload" data-input-id="c-thumbimage" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="false" data-preview-id="p-thumbimage"><i class="fa fa-upload"></i> {:__('Upload')}</button></span>
                <span><button type="button" id="fachoose-thumbimage" class="btn btn-primary fachoose" data-input-id="c-thumbimage" data-mimetype="image/*" data-multiple="false"><i class="fa fa-list"></i> {:__('Choose')}</button></span>
                <ul class="row list-inline plupload-preview" id="p-thumbimage"></ul>
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="c-galleryimages" class="control-label col-xs-12 col-sm-2">{:__('Galleryimages')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="form-inline">
                <input id="c-galleryimages" class="form-control" size="50" name="row[galleryimages]" type="text">
                <span><button type="button" id="plupload-galleryimages" class="btn btn-danger plupload" data-input-id="c-galleryimages" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="true" data-preview-id="p-galleryimages"><i class="fa fa-upload"></i> {:__('Upload')}</button></span>
                <span><button type="button" id="fachoose-galleryimages" class="btn btn-primary fachoose" data-input-id="c-galleryimages" data-mimetype="image/*" data-multiple="true"><i class="fa fa-list"></i> {:__('Choose')}</button></span>
                <ul class="row list-inline plupload-preview" id="p-galleryimages"></ul>
            </div>
        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-success btn-embossed disabled">{:__('OK')}</button>
            <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
        </div>
    </div>
</form>

<button onclick="javascript:getAttrList();">test</button>

<style>
    .input-attr {margin:5px;}
</style>
<script src="/assets/libs/jquery/dist/jquery.min.js"></script>
<script>
    // 获取属性分类, 重新生成属性列表
    makeAttrs();
    function makeAttrs(){
        $('#div-attrs').html('');
        $.get('/admin/product/Attr/getAttrsByCid/intCid/'+"7", function(data){
            for(index=0; index<data.length; index++)
            {
                var dom_a_attrs = '<div class="a-attrs">';
                    dom_a_attrs += '<h5>'+data[index]['info']['name']+'</h5>';
                    dom_a_attrs += '<div class="attr-list">';

                    var child = data[index]['child'];
                    for(index_list=0; index_list<child.length; index_list++)
                    {
                        //dom_a_attrs += '<button class="btn btn-attr" type="button">'+child[index_list]['name']+'</button>';
                        dom_a_attrs += '<input class="input-attr" type="checkbox" name="row[attr]['+index+'][]" value="' + child[index_list]['name'] + '">' + child[index_list]['name'];
                    }

                    dom_a_attrs += '</div>'
                    dom_a_attrs +='</div>';
                $('#div-attrs').append(dom_a_attrs);
            }
        });
    }

    // 属性选择
    $('#add-form').on('click', '.btn-attr', function(){
        $(this).toggleClass('btn-info btn-selected');
    });

    // 选择的属性
    /*function getAttrList()
    {
        var arrayAttrList = new Array();
        $('#add-form .attr-list').each(function(index){
            var arrayLabel = new Array();
            $('#add-form .attr-list').eq(index).find('.btn-selected').each(function(){
                arrayLabel.push( $(this).text() );
            });
            arrayAttrList.push( arrayLabel );
        });
        return arrayAttrList;
    }*/

    // 目录选择
    $('#add-form').on('change', '#c-product_category_id_text', function(){
        var categoryId = $('#c-product_category_id_text').val();
        alert(categoryId);
    });

    $('#c-product_category_id').on('eSelect', function(){
        alert('dfsd');
        //$('xxx').val(data.name + data.sex);
    });
</script>
